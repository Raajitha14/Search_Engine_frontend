<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./loginpage.css">
    <title>Login page using html</title>

</head>
<body>
    <h1>Admin Login page</h1>
    <form action="/login" method="POST" >
        <!-- Headings for the form -->
        <div class="headingsContainer">
            <h3>Sign in</h3>
            <p>Sign in with your username and password</p>

        </div>
        <!-- Main container for all inputs -->
        <div class="mainContainer">
            <label for="username">Username</label>
            <input type="text" placeholder="Enter Username" name="username" id="username" required>

            <br><br>

            <label for="paswrd">Password</label>
            <input type="password" placeholder="Enter Password" name="password" id="password"required>

            <div class="subcontainer">
                <label>
                    <input type="checkbox" checked="checked" name="remember">Remember me
                </label>
                <!-- <p class="forgotpassword"><a href="#">Forgot password?</a></p> -->
            </div>


            <br>
            
            <button  class="btn" type="button" onclick="logIn(event)">Login</button>
            
            
            <!-- <p class="register">Not a Member?<a href="#">Register here!</a></p> -->

          

        </div>
       
    </form>
    <script>
    async function logIn(event){
        event.preventDefault()
        const admin_username=document.getElementById('username').value
        const admin_password=document.getElementById('password').value
        if(admin_username==""){
            alert("Please enter the username")
        }
        else{
    
                fetch("http://127.0.0.1:5000/login", {
                method: "POST",
                body: JSON.stringify({
                    username:admin_username,
                    password:admin_password,
  })
})
  .then((response) => response.json())
  .then((json) => {
        console.log(json)
        let status=json["status"]
        if(status==200)
        {

        alert('logged in with username '+ admin_username )
        window.location ="admin_index.html";

        }
        else{
        alert('login failed')
        }})
  .catch(err=>{console.log(err)})
            }
        }

        


   

</script> 
</body>


</html>